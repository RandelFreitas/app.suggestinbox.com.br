{"ast":null,"code":"import _slicedToArray from\"D:\\\\Randel\\\\PROJETO 2020\\\\SuggestInBox\\\\app.suggestinbox.com.br\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import PropTypes from'prop-types';import{bindActionCreators}from'redux';import{connect}from'react-redux';import{listSuggest,favorite,outlier}from'../../../../store/suggestReducer';import{atvCompany}from'../../../../store/companyReducer';import{parseISO}from'date-fns';import{format}from'date-fns-tz';import DateFnsUtils from'@date-io/date-fns';import{MuiPickersUtilsProvider,KeyboardDatePicker}from'@material-ui/pickers';import{ptBR}from\"date-fns/locale\";import Paper from'@material-ui/core/Paper';import Table from'@material-ui/core/Table';import TableBody from'@material-ui/core/TableBody';import TableCell from'@material-ui/core/TableCell';import TableContainer from'@material-ui/core/TableContainer';import TableHead from'@material-ui/core/TableHead';import TableRow from'@material-ui/core/TableRow';import MenuItem from'@material-ui/core/MenuItem';import FormControl from'@material-ui/core/FormControl';import Select from'@material-ui/core/Select';import FormHelperText from'@material-ui/core/FormHelperText';import Box from'@material-ui/core/Box';import Pagination from'@material-ui/lab/Pagination';import Typography from'@material-ui/core/Typography';import StarIcon from'@material-ui/icons/Star';import StarBorderIcon from'@material-ui/icons/StarBorder';import DeleteOutlineIcon from'@material-ui/icons/DeleteOutline';import Rating from'@material-ui/lab/Rating';import{makeStyles}from'@material-ui/core/styles';import Grid from'@material-ui/core/Grid';import{MuiThemeProvider,createMuiTheme}from'@material-ui/core/styles';import{IconButton}from'@material-ui/core';import CloseIcon from'@material-ui/icons/Close';import CheckIcon from'@material-ui/icons/Check';import Switch from\"@material-ui/core/Switch\";import FormGroup from'@material-ui/core/FormGroup';import FormControlLabel from'@material-ui/core/FormControlLabel';var theme=createMuiTheme({palette:{secondary:{main:'#FFB701'}}});var useStyles=makeStyles(function(theme){return{center:{justifyContent:'center',textAlign:'center',margin:'20px'},filter:{minWidth:'110px',marginLeft:'9px'},data:{margin:'9px',maxWidth:'140px'},hide:{display:'none'},buttonAtv:{margin:'15px 0'}};});var Suggest=function Suggest(props){var classes=useStyles();var _useState=useState(window.location.href.split('/?')[2].split('?')[0]),_useState2=_slicedToArray(_useState,1),idCompany=_useState2[0];var suggests=props.suggests,infosSuggests=props.infosSuggests,companyById=props.companyById;var pages=infosSuggests.pages;var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),page=_useState4[0],setPage=_useState4[1];var _useState5=useState(25),_useState6=_slicedToArray(_useState5,2),limit=_useState6[0],setLimit=_useState6[1];var _useState7=useState('All'),_useState8=_slicedToArray(_useState7,2),typeSuggests=_useState8[0],setTypeSuggests=_useState8[1];var _useState9=useState(new Date('2020-01-01T00:00:00')),_useState10=_slicedToArray(_useState9,2),selectedDateFrom=_useState10[0],setSelectedDateFrom=_useState10[1];var _useState11=useState(Date.now),_useState12=_slicedToArray(_useState11,2),selectedDateTo=_useState12[0],setSelectedDateTo=_useState12[1];var _useState13=useState({check:companyById.suggest}),_useState14=_slicedToArray(_useState13,2),suggestAtv=_useState14[0],setSuggestAtv=_useState14[1];useEffect(function(){props.listSuggest(idCompany,page,limit,typeSuggests,selectedDateFrom,selectedDateTo);},[]);useEffect(function(){setSuggestAtv({check:companyById.suggest});},[companyById.suggest]);var handleChangePage=function handleChangePage(event,value){setPage(value);props.listSuggest(idCompany,value,limit,typeSuggests,selectedDateFrom,selectedDateTo);};var handleLimit=function handleLimit(event){setLimit(event.target.value);props.listSuggest(idCompany,page,event.target.value,typeSuggests,selectedDateFrom,selectedDateTo);setPage(1);};var handleChangSuggest=function handleChangSuggest(event){setTypeSuggests(event.target.value);props.listSuggest(idCompany,page,limit,event.target.value,selectedDateFrom,selectedDateTo);};var handleDateChangeFrom=function handleDateChangeFrom(date){setSelectedDateFrom(date);console.log(date);};var handleDateChangeTo=function handleDateChangeTo(date){setSelectedDateTo(date);props.listSuggest(idCompany,page,limit,typeSuggests,selectedDateFrom,date);};//FAV E ARQ\nvar favoriteUpdate=function favoriteUpdate(suggest){if(suggest.favorite){suggest.favorite=false;return props.favorite(suggest);}else{suggest.favorite=true;return props.favorite(suggest);}};var outlierUpdate=function outlierUpdate(suggest){if(suggest.outlier){suggest.outlier=false;return props.outlier(suggest);}else{suggest.outlier=true;return props.outlier(suggest);}};var atvSuggest=function atvSuggest(companyById){if(companyById.suggest){companyById.suggest=false;setSuggestAtv({check:companyById.suggest});return props.atvCompany(companyById);}else{companyById.suggest=true;setSuggestAtv({check:companyById.suggest});return props.atvCompany(companyById);}};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Typography,{variant:\"h5\",component:\"h2\"},\"Sugest\\xF5es\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Grid,{container:true},/*#__PURE__*/React.createElement(Grid,{item:true,className:classes.buttonAtv},/*#__PURE__*/React.createElement(FormGroup,{row:true},/*#__PURE__*/React.createElement(FormControlLabel,{control:/*#__PURE__*/React.createElement(Switch,{checked:suggestAtv.check?suggestAtv.check:false,onClick:function onClick(){return atvSuggest(companyById);},name:\"checkedA\",color:\"primary\"}),label:\"Ativar/Desativar\"})))),/*#__PURE__*/React.createElement(FormControl,null,/*#__PURE__*/React.createElement(FormHelperText,null,\"N\\xFAmero por p\\xE1gina:\"),/*#__PURE__*/React.createElement(Select,{value:limit,onChange:handleLimit,inputProps:{'aria-label':'Without label'}},/*#__PURE__*/React.createElement(MenuItem,{value:25},\"25\"),/*#__PURE__*/React.createElement(MenuItem,{value:50},\"50\"),/*#__PURE__*/React.createElement(MenuItem,{value:75},\"75\"))),/*#__PURE__*/React.createElement(FormControl,{className:classes.filter},/*#__PURE__*/React.createElement(FormHelperText,null,\"Filtrar por:\"),/*#__PURE__*/React.createElement(Select,{value:typeSuggests,onChange:handleChangSuggest,inputProps:{'aria-label':'Without label'}},/*#__PURE__*/React.createElement(MenuItem,{value:'All'},\"Todas\"),/*#__PURE__*/React.createElement(MenuItem,{value:'Fav'},\"Favoritas\"),/*#__PURE__*/React.createElement(MenuItem,{value:'Arq'},\"Arquivadas\"))),/*#__PURE__*/React.createElement(MuiPickersUtilsProvider,{locale:ptBR,utils:DateFnsUtils},/*#__PURE__*/React.createElement(KeyboardDatePicker,{className:classes.data,disableToolbar:true,variant:\"inline\",format:\"dd/MM/yyyy\",margin:\"normal\",id:\"date-picker-inline\",label:\"De\",size:\"small\",invalidDateMessage:\"Data inv\\xE1lida.\",value:selectedDateFrom,onChange:handleDateChangeFrom,KeyboardButtonProps:{'aria-label':'change date'}}),/*#__PURE__*/React.createElement(KeyboardDatePicker,{className:classes.data,disableToolbar:true,variant:\"inline\",format:\"dd/MM/yyyy\",margin:\"normal\",id:\"date-picker-dialog\",label:\"At\\xE9\",size:\"small\",invalidDateMessage:\"Data inv\\xE1lida.\",value:selectedDateTo,onChange:handleDateChangeTo,KeyboardButtonProps:{'aria-label':'change date'}}))),/*#__PURE__*/React.createElement(Paper,null,/*#__PURE__*/React.createElement(TableContainer,null,/*#__PURE__*/React.createElement(Table,{stickyHeader:true,\"aria-label\":\"sticky table\"},/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},\"Data\"),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},\"Nome\"),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},\"Telefone\"),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},\"Avalia\\xE7\\xE3o\"),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},\"Recomenda\"),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},\"Opini\\xE3o\"),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"}),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"}))),/*#__PURE__*/React.createElement(TableBody,null,/*#__PURE__*/React.createElement(MuiThemeProvider,{theme:theme},suggests.map(function(suggest){return/*#__PURE__*/React.createElement(TableRow,{hover:true,key:suggest._id,role:\"checkbox\",tabIndex:-1},/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},format(parseISO(suggest.createdAt),'dd/MM/yyyy HH:mm',{timeZone:'America/Sao_Paulo'})),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},suggest.name),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},suggest.phone),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},/*#__PURE__*/React.createElement(Rating,{name:\"read-only\",size:\"small\",value:suggest.stars?suggest.stars:0,precision:0.5,readOnly:true})),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},suggest.recommends?/*#__PURE__*/React.createElement(CheckIcon,null):/*#__PURE__*/React.createElement(CloseIcon,null)),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},suggest.opinion),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},/*#__PURE__*/React.createElement(IconButton,{onClick:function onClick(){return favoriteUpdate(suggest);}},suggest.favorite?/*#__PURE__*/React.createElement(StarIcon,{color:\"secondary\"}):/*#__PURE__*/React.createElement(StarBorderIcon,null))),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},/*#__PURE__*/React.createElement(IconButton,{onClick:function onClick(){return outlierUpdate(suggest);}},suggest.outlier?/*#__PURE__*/React.createElement(DeleteOutlineIcon,{color:\"disabled\"}):/*#__PURE__*/React.createElement(DeleteOutlineIcon,null))));}))))),/*#__PURE__*/React.createElement(Grid,{className:classes.center,container:true,item:true,xs:12,spacing:3},/*#__PURE__*/React.createElement(Box,{component:\"span\"},/*#__PURE__*/React.createElement(Pagination,{count:pages,page:page,onChange:handleChangePage})))));};Suggest.prototypes={suggest:PropTypes.array.isRequired};var mapStateToProps=function mapStateToProps(state){return{companyById:state.company.companyById,suggests:state.suggest.suggests,infosSuggests:state.suggest.infosSuggests};};var mapsDispatchToProps=function mapsDispatchToProps(dispatch){return bindActionCreators({listSuggest:listSuggest,favorite:favorite,outlier:outlier,atvCompany:atvCompany},dispatch);};export default connect(mapStateToProps,mapsDispatchToProps)(Suggest);","map":{"version":3,"sources":["D:/Randel/PROJETO 2020/SuggestInBox/app.suggestinbox.com.br/src/pages/User/Suggest/Suggests/index.js"],"names":["React","useState","useEffect","PropTypes","bindActionCreators","connect","listSuggest","favorite","outlier","atvCompany","parseISO","format","DateFnsUtils","MuiPickersUtilsProvider","KeyboardDatePicker","ptBR","Paper","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","MenuItem","FormControl","Select","FormHelperText","Box","Pagination","Typography","StarIcon","StarBorderIcon","DeleteOutlineIcon","Rating","makeStyles","Grid","MuiThemeProvider","createMuiTheme","IconButton","CloseIcon","CheckIcon","Switch","FormGroup","FormControlLabel","theme","palette","secondary","main","useStyles","center","justifyContent","textAlign","margin","filter","minWidth","marginLeft","data","maxWidth","hide","display","buttonAtv","Suggest","props","classes","window","location","href","split","idCompany","suggests","infosSuggests","companyById","pages","page","setPage","limit","setLimit","typeSuggests","setTypeSuggests","Date","selectedDateFrom","setSelectedDateFrom","now","selectedDateTo","setSelectedDateTo","check","suggest","suggestAtv","setSuggestAtv","handleChangePage","event","value","handleLimit","target","handleChangSuggest","handleDateChangeFrom","date","console","log","handleDateChangeTo","favoriteUpdate","outlierUpdate","atvSuggest","map","_id","createdAt","timeZone","name","phone","stars","recommends","opinion","prototypes","array","isRequired","mapStateToProps","state","company","mapsDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { connect } from 'react-redux';\r\nimport { listSuggest, favorite, outlier } from '../../../../store/suggestReducer';\r\nimport { atvCompany } from '../../../../store/companyReducer';\r\nimport { parseISO } from 'date-fns';\r\nimport { format } from 'date-fns-tz';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport { MuiPickersUtilsProvider, KeyboardDatePicker } from '@material-ui/pickers';\r\nimport { ptBR } from \"date-fns/locale\";\r\n\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport Box from '@material-ui/core/Box';\r\nimport Pagination from '@material-ui/lab/Pagination';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport StarIcon from '@material-ui/icons/Star';\r\nimport StarBorderIcon from '@material-ui/icons/StarBorder';\r\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\r\nimport Rating from '@material-ui/lab/Rating';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\r\nimport { IconButton } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    secondary:{\r\n      main: '#FFB701'\r\n    }\r\n  },\r\n});\r\n\r\nconst useStyles = makeStyles((theme) =>({\r\n  center: {\r\n    justifyContent: 'center',\r\n    textAlign: 'center',\r\n    margin: '20px'\r\n  },\r\n  filter: {\r\n    minWidth: '110px',\r\n    marginLeft: '9px'\r\n  },\r\n  data: {\r\n    margin: '9px',\r\n    maxWidth: '140px'\r\n  },\r\n  hide: {\r\n    display: 'none'\r\n  },\r\n  buttonAtv: {\r\n    margin: '15px 0'\r\n  }\r\n}));\r\n\r\nconst Suggest = (props) => {\r\n  const classes = useStyles();\r\n  const [ idCompany ] = useState(window.location.href.split('/?')[2].split('?')[0]);\r\n  const {suggests, infosSuggests, companyById} = props;\r\n  const pages = infosSuggests.pages;\r\n  \r\n  const [ page, setPage ] = useState(1);\r\n  const [ limit, setLimit ] = useState(25);\r\n  const [typeSuggests, setTypeSuggests] = useState('All');\r\n  const [selectedDateFrom, setSelectedDateFrom] = useState(new Date('2020-01-01T00:00:00'));\r\n  const [selectedDateTo, setSelectedDateTo] = useState(Date.now);\r\n\r\n  const [ suggestAtv, setSuggestAtv ] = useState({\r\n    check: companyById.suggest\r\n  });\r\n  \r\n  useEffect(() => {\r\n    props.listSuggest(idCompany, page, limit, typeSuggests, selectedDateFrom, selectedDateTo);\r\n  },[]);\r\n\r\n  useEffect(() => {\r\n    setSuggestAtv({check: companyById.suggest});\r\n  },[companyById.suggest])\r\n\r\n  const handleChangePage=(event, value)=>{\r\n    setPage(value);\r\n    props.listSuggest(idCompany, value, limit, typeSuggests, selectedDateFrom, selectedDateTo);\r\n  }\r\n  const handleLimit=(event)=>{\r\n    setLimit(event.target.value);\r\n    props.listSuggest(idCompany, page, event.target.value, typeSuggests, selectedDateFrom, selectedDateTo);\r\n    setPage(1);\r\n  }\r\n  const handleChangSuggest=(event)=>{\r\n    setTypeSuggests(event.target.value);\r\n    props.listSuggest(idCompany, page, limit, event.target.value, selectedDateFrom, selectedDateTo);\r\n  }\r\n  const handleDateChangeFrom = (date) => {\r\n    setSelectedDateFrom(date);\r\n    console.log(date);\r\n  };\r\n  const handleDateChangeTo = (date) => {\r\n    setSelectedDateTo(date);\r\n    props.listSuggest(idCompany, page, limit, typeSuggests, selectedDateFrom, date);\r\n  };\r\n\r\n  //FAV E ARQ\r\n  const favoriteUpdate = (suggest) => {\r\n    if(suggest.favorite){\r\n      suggest.favorite = false;\r\n      return props.favorite(suggest)\r\n    }else{\r\n      suggest.favorite = true;\r\n      return props.favorite(suggest)\r\n    }\r\n  }\r\n  const outlierUpdate = (suggest) => {\r\n    if(suggest.outlier){\r\n      suggest.outlier = false;\r\n      return props.outlier(suggest)\r\n    }else{\r\n      suggest.outlier = true;\r\n      return props.outlier(suggest)\r\n    }\r\n  }\r\n\r\n  const atvSuggest = (companyById) => {\r\n    if(companyById.suggest){\r\n      companyById.suggest = false;\r\n      setSuggestAtv({check: companyById.suggest});\r\n      return props.atvCompany(companyById);\r\n    }else{\r\n      companyById.suggest = true;\r\n      setSuggestAtv({check: companyById.suggest});\r\n      return props.atvCompany(companyById);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Typography variant=\"h5\" component=\"h2\">Sugestões</Typography>\r\n       <div>\r\n        <Grid container>\r\n          <Grid item className={classes.buttonAtv}>\r\n            <FormGroup row>\r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={suggestAtv.check? suggestAtv.check: false}\r\n                  onClick={()=>atvSuggest(companyById)}\r\n                  name=\"checkedA\"\r\n                  color=\"primary\"\r\n                />\r\n              }\r\n              label=\"Ativar/Desativar\"\r\n            />\r\n            </FormGroup>\r\n          </Grid>\r\n        </Grid>\r\n        <FormControl>\r\n          <FormHelperText>Número por página:</FormHelperText>\r\n          <Select\r\n            value={limit}\r\n            onChange={handleLimit}\r\n            inputProps={{ 'aria-label': 'Without label' }}>\r\n            <MenuItem value={25}>25</MenuItem>\r\n            <MenuItem value={50}>50</MenuItem>\r\n            <MenuItem value={75}>75</MenuItem>\r\n          </Select>\r\n        </FormControl>\r\n        <FormControl className={classes.filter}>\r\n          <FormHelperText>Filtrar por:</FormHelperText>\r\n          <Select\r\n            value={typeSuggests}\r\n            onChange={handleChangSuggest}\r\n            inputProps={{ 'aria-label': 'Without label' }}>\r\n            <MenuItem value={'All'}>Todas</MenuItem>\r\n            <MenuItem value={'Fav'}>Favoritas</MenuItem>\r\n            <MenuItem value={'Arq'}>Arquivadas</MenuItem>\r\n          </Select>\r\n        </FormControl>\r\n        <MuiPickersUtilsProvider locale={ptBR} utils={DateFnsUtils}>\r\n          <KeyboardDatePicker\r\n            className={classes.data}\r\n            disableToolbar\r\n            variant=\"inline\"\r\n            format=\"dd/MM/yyyy\"\r\n            margin=\"normal\"\r\n            id=\"date-picker-inline\"\r\n            label=\"De\"\r\n            size=\"small\"\r\n            invalidDateMessage=\"Data inválida.\"\r\n            value={selectedDateFrom}\r\n            onChange={handleDateChangeFrom}\r\n            KeyboardButtonProps={{\r\n              'aria-label': 'change date',\r\n            }}\r\n          />\r\n          <KeyboardDatePicker\r\n            className={classes.data}\r\n            disableToolbar\r\n            variant=\"inline\"\r\n            format=\"dd/MM/yyyy\"\r\n            margin=\"normal\"\r\n            id=\"date-picker-dialog\"\r\n            label=\"Até\"\r\n            size=\"small\"\r\n            invalidDateMessage=\"Data inválida.\"\r\n            value={selectedDateTo}\r\n            onChange={handleDateChangeTo}\r\n            KeyboardButtonProps={{\r\n              'aria-label': 'change date',\r\n            }}\r\n          />\r\n        </MuiPickersUtilsProvider>\r\n      </div>\r\n      <Paper>\r\n        <TableContainer>\r\n          <Table stickyHeader aria-label=\"sticky table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell align='center'>Data</TableCell>\r\n                <TableCell align='center'>Nome</TableCell>\r\n                <TableCell align='center'>Telefone</TableCell>\r\n                <TableCell align='center'>Avaliação</TableCell>\r\n                <TableCell align='center'>Recomenda</TableCell>\r\n                <TableCell align='center'>Opinião</TableCell>\r\n                <TableCell align='center'/>\r\n                <TableCell align='center'/>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              <MuiThemeProvider theme={theme}>\r\n                { suggests.map( suggest => {\r\n                  return (\r\n                    <TableRow hover key={suggest._id} role=\"checkbox\" tabIndex={-1}>\r\n                      <TableCell align='center'>{format(parseISO(suggest.createdAt), 'dd/MM/yyyy HH:mm', {timeZone: 'America/Sao_Paulo'} )}</TableCell>\r\n                      <TableCell align='center'>{suggest.name}</TableCell>\r\n                      <TableCell align='center'>{suggest.phone}</TableCell>\r\n                      <TableCell align='center'>\r\n                        <Rating name=\"read-only\" size=\"small\" value={suggest.stars? suggest.stars: 0} precision={0.5} readOnly/>\r\n                      </TableCell>\r\n                      <TableCell align='center'>{suggest.recommends? (<CheckIcon/>) : (<CloseIcon/>)}</TableCell>\r\n                      <TableCell align='center'>{suggest.opinion}</TableCell>\r\n                      <TableCell align='center'>\r\n                        <IconButton onClick={() => favoriteUpdate(suggest)}>\r\n                          {suggest.favorite? (<StarIcon color='secondary'/>):(<StarBorderIcon/>)}\r\n                        </IconButton>\r\n                      </TableCell>\r\n                      <TableCell align='center'>\r\n                        <IconButton onClick={() => outlierUpdate(suggest)}>\r\n                          {suggest.outlier? (<DeleteOutlineIcon color=\"disabled\"/>):(<DeleteOutlineIcon/>)}\r\n                        </IconButton>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  )\r\n                })}\r\n              </MuiThemeProvider>\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <Grid className={classes.center} container item xs={12} spacing={3}>\r\n          <Box component=\"span\">\r\n            <Pagination\r\n              count={pages}\r\n              page={page}\r\n              onChange={handleChangePage}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nSuggest.prototypes = {\r\n  suggest: PropTypes.array.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  companyById: state.company.companyById,\r\n  suggests: state.suggest.suggests,\r\n  infosSuggests: state.suggest.infosSuggests,\r\n});\r\n\r\nconst mapsDispatchToProps = dispatch => \r\n  bindActionCreators({listSuggest, favorite, outlier, atvCompany}, dispatch);\r\n\r\nexport default connect(mapStateToProps, mapsDispatchToProps)(Suggest);"]},"metadata":{},"sourceType":"module"}