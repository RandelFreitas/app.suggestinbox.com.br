{"ast":null,"code":"import _objectSpread from\"D:\\\\Randel\\\\PROJETO 2020\\\\SuggestInBox\\\\app.suggestinbox.com.br\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import api from'../services/api';import history from'../services/history';import{setInfosLocalStorage}from'../services/auth';import{showMessage}from'./messageReducer';var ACTIONS={AUTH:'AUTH',FOGOT:'FOGOT'};var INITIAL_STATE={infos:[],email:[],user:[]};export var authReducer=function authReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:INITIAL_STATE;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ACTIONS.AUTH:return _objectSpread({},state,{infos:action.infos});case ACTIONS.FOGOT:return _objectSpread({},state,{email:action.email});case ACTIONS.RESET:return _objectSpread({},state,{user:action.user});default:return state;}};//AUTENTICAÇÃO\nexport var auth=function auth(login){return function(dispatch){api.post('/auth',login).then(function(Response){dispatch({type:ACTIONS.AUTH,infos:Response.data});if(!Response.data.token){dispatch(showMessage(\"Senha ou email inválidos!\"));}else{setInfosLocalStorage(Response.data.token,Response.data.user);history.push(\"/user/?\".concat(Response.data.user._id,\"?page=1&limit=25\"));}}).catch(function(error){dispatch(showMessage(\"Servidor indisponível, tente mais tarde!\"),console.log(error));});};};//ESQUECI SENHA\nexport var fogot=function fogot(email){return function(dispatch){api.post('/auth/fogot',email).then(function(Response){dispatch({type:ACTIONS.FOGOT,email:Response.data});if(!Response.data.email){dispatch(showMessage(\"Usuario não encontrado!\"));}else{dispatch(showMessage(\"Email enviado com sucesso!\"),history.push('/login'));}}).catch(function(error){dispatch(showMessage(\"Servidor indisponível, tente mais tarde!\"),console.log(error));});};};//RESET SENHA\nexport var reset=function reset(user){return function(dispatch){api.post('/auth/reset-password',user).then(function(Response){dispatch({type:ACTIONS.FOGOT,user:Response.data});if(!Response.data.success){dispatch(showMessage(\"Usuario não encontrado!\"));}else{dispatch(showMessage(\"Senha recuperada com sucesso!\"),history.push('/login'));}}).catch(function(error){dispatch(showMessage(\"Serviço indisponível, tente mais tarde!\"),console.log(error));});};};","map":{"version":3,"sources":["D:/Randel/PROJETO 2020/SuggestInBox/app.suggestinbox.com.br/src/store/authReducer.js"],"names":["api","history","setInfosLocalStorage","showMessage","ACTIONS","AUTH","FOGOT","INITIAL_STATE","infos","email","user","authReducer","state","action","type","RESET","auth","login","dispatch","post","then","Response","data","token","push","_id","catch","error","console","log","fogot","reset","success"],"mappings":"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","sourcesContent":["import api from '../services/api';\r\nimport history from '../services/history';\r\nimport { setInfosLocalStorage } from '../services/auth';\r\nimport { showMessage } from './messageReducer';\r\n\r\nconst ACTIONS = {\r\n  AUTH: 'AUTH',\r\n  FOGOT: 'FOGOT'\r\n}\r\nconst INITIAL_STATE = {\r\n  infos:[],\r\n  email:[],\r\n  user:[],\r\n}\r\nexport const authReducer = (state = INITIAL_STATE, action) => {\r\n  switch(action.type){\r\n    case ACTIONS.AUTH:\r\n      return {...state, infos: action.infos}\r\n    case ACTIONS.FOGOT:\r\n      return {...state, email: action.email}\r\n    case ACTIONS.RESET:\r\n      return {...state, user: action.user}\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n//AUTENTICAÇÃO\r\nexport const auth = (login) => {\r\n  return dispatch => {\r\n    api.post('/auth', login)\r\n    .then(Response => {\r\n      dispatch({\r\n        type: ACTIONS.AUTH,\r\n        infos: Response.data,\r\n      }); \r\n      if(!Response.data.token){\r\n        dispatch(\r\n          showMessage(\"Senha ou email inválidos!\")\r\n        )\r\n      }else{\r\n        setInfosLocalStorage(Response.data.token, Response.data.user);\r\n        history.push(`/user/?${Response.data.user._id}?page=1&limit=25`);\r\n      }\r\n    })\r\n    .catch(error => {\r\n      dispatch(\r\n        showMessage(\"Servidor indisponível, tente mais tarde!\"),\r\n        console.log(error)\r\n      )}\r\n    )\r\n  }\r\n}\r\n//ESQUECI SENHA\r\nexport const fogot = (email) => {\r\n  return dispatch => {\r\n    api.post('/auth/fogot', email)\r\n    .then(Response => {\r\n      dispatch({\r\n        type: ACTIONS.FOGOT,\r\n        email: Response.data,\r\n      });\r\n      if(!Response.data.email){\r\n        dispatch(\r\n          showMessage(\"Usuario não encontrado!\")\r\n        )\r\n      }else{\r\n        dispatch(\r\n          showMessage(\"Email enviado com sucesso!\"),\r\n          history.push('/login')\r\n        )\r\n      }\r\n    })\r\n    .catch(error => {\r\n      dispatch(\r\n        showMessage(\"Servidor indisponível, tente mais tarde!\"),\r\n        console.log(error)\r\n      )}\r\n    );\r\n  }\r\n}\r\n//RESET SENHA\r\nexport const reset = (user) => {\r\n  return dispatch => {\r\n    api.post('/auth/reset-password', user)\r\n    .then(Response => {\r\n      dispatch({\r\n          type: ACTIONS.FOGOT,\r\n          user: Response.data,\r\n      });\r\n      if(!Response.data.success){\r\n        dispatch(\r\n          showMessage(\"Usuario não encontrado!\")\r\n        )\r\n      }else{\r\n        dispatch(\r\n          showMessage(\"Senha recuperada com sucesso!\"),\r\n          history.push('/login')\r\n        )\r\n      }\r\n    })\r\n    .catch(error => {\r\n      dispatch(\r\n        showMessage(\"Serviço indisponível, tente mais tarde!\"),\r\n        console.log(error)\r\n      )}\r\n    );\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}