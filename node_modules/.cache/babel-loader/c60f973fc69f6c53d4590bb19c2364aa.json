{"ast":null,"code":"import _objectSpread from\"D:\\\\Randel\\\\PROJETO 2020\\\\SuggestInBox\\\\app.suggestinbox.com.br\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import api from'../services/api';import history from'../services/history';var ACTIONS={LIST_CALLS:'LISTCALLS',BY_ID_CALL:'BYIDCALL',ADD_CALL:'ADDCALL',UPDATE_CALL:'UPDATECALL',DELETE_CALL:'DELETECALL'};var INITIAL_STATE={calls:[],infosCalls:[],callById:[]};export var callReducer=function callReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:INITIAL_STATE;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ACTIONS.LIST_CALLS:return _objectSpread({},state,{calls:action.calls,infosCalls:action.infosCalls});case ACTIONS.ADD_CALL:return _objectSpread({},state);case ACTIONS.BY_ID_CALL:return _objectSpread({},state,{callById:action.callById});case ACTIONS.UPDATE_CALL:return state;case ACTIONS.DELETE_CALL:var id=action.id;var calls=state.calls.filter(function(call){return call._id!==id;});console.log(calls);return _objectSpread({},state,{calls:calls});default:return state;}};//LISTAR CALLS\nexport var listCalls=function listCalls(page,nOfItems){return function(dispatch){api.get(\"/adm/all-calls?page=\".concat(page,\"&limit=\").concat(nOfItems)).then(function(Response){var _Response$data=Response.data,docs=_Response$data.docs,infos=_Response$data.infos;dispatch({type:ACTIONS.LIST_CALLS,calls:docs,infosCalls:infos});}).catch(function(error){console.log(error);});};};//GET BY ID CALL\nexport var getCallById=function getCallById(id){return function(dispatch){api.get(\"/adm/call/\".concat(id)).then(function(Response){dispatch({type:ACTIONS.BY_ID_CALL,callById:Response.data});}).catch(function(error){console.log(error);});};};//UPDATE CALL\nexport var updateCall=function updateCall(company,id,idUser){return function(dispatch){api.put(\"/adm/call/\".concat(id),company).then(function(Response){dispatch({type:ACTIONS.UPDATE_CALL});},history.push(\"/suggest/call/?\".concat(idUser,\"/?\").concat(id,\"?page=1&limit=25\"))).catch(function(error){console.log(error);});};};//DELETE CALL\nexport var destroyCall=function destroyCall(id){return function(dispatch){api.delete(\"/adm/call/\".concat(id)).then(function(Response){dispatch({type:ACTIONS.DELETE_CALL,id:id});}).catch(function(error){console.log(error);});};};","map":{"version":3,"sources":["D:/Randel/PROJETO 2020/SuggestInBox/app.suggestinbox.com.br/src/store/callReducer.js"],"names":["api","history","ACTIONS","LIST_CALLS","BY_ID_CALL","ADD_CALL","UPDATE_CALL","DELETE_CALL","INITIAL_STATE","calls","infosCalls","callById","callReducer","state","action","type","id","filter","call","_id","console","log","listCalls","page","nOfItems","dispatch","get","then","Response","data","docs","infos","catch","error","getCallById","updateCall","company","idUser","put","push","destroyCall","delete"],"mappings":"0LAAA,MAAOA,CAAAA,GAAP,KAAgB,iBAAhB,CACA,MAAOC,CAAAA,OAAP,KAAoB,qBAApB,CAEA,GAAMC,CAAAA,OAAO,CAAG,CACdC,UAAU,CAAE,WADE,CAEdC,UAAU,CAAE,UAFE,CAGdC,QAAQ,CAAE,SAHI,CAIdC,WAAW,CAAE,YAJC,CAKdC,WAAW,CAAE,YALC,CAAhB,CAOA,GAAMC,CAAAA,aAAa,CAAG,CACpBC,KAAK,CAAE,EADa,CAEpBC,UAAU,CAAE,EAFQ,CAGpBC,QAAQ,CAAE,EAHU,CAAtB,CAKA,MAAO,IAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAmC,IAAlCC,CAAAA,KAAkC,2DAA1BL,aAA0B,IAAXM,CAAAA,MAAW,2CAC5D,OAAOA,MAAM,CAACC,IAAd,EACE,IAAKb,CAAAA,OAAO,CAACC,UAAb,CACE,wBAAWU,KAAX,EAAkBJ,KAAK,CAAEK,MAAM,CAACL,KAAhC,CAAuCC,UAAU,CAAEI,MAAM,CAACJ,UAA1D,GACF,IAAKR,CAAAA,OAAO,CAACG,QAAb,CACE,wBAAWQ,KAAX,EACF,IAAKX,CAAAA,OAAO,CAACE,UAAb,CACE,wBAAWS,KAAX,EAAkBF,QAAQ,CAAEG,MAAM,CAACH,QAAnC,GACF,IAAKT,CAAAA,OAAO,CAACI,WAAb,CACE,MAAOO,CAAAA,KAAP,CACF,IAAKX,CAAAA,OAAO,CAACK,WAAb,CACE,GAAMS,CAAAA,EAAE,CAAGF,MAAM,CAACE,EAAlB,CACA,GAAMP,CAAAA,KAAK,CAAGI,KAAK,CAACJ,KAAN,CAAYQ,MAAZ,CAAoB,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACC,GAAL,GAAaH,EAAjB,EAAxB,CAAd,CACAI,OAAO,CAACC,GAAR,CAAYZ,KAAZ,EACA,wBAAWI,KAAX,EAAkBJ,KAAK,CAAEA,KAAzB,GACF,QACE,MAAOI,CAAAA,KAAP,CAfJ,CAiBD,CAlBM,CAmBP;AACA,MAAO,IAAMS,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,IAAD,CAAOC,QAAP,CAAoB,CAC3C,MAAO,UAAAC,QAAQ,CAAI,CACjBzB,GAAG,CAAC0B,GAAJ,+BAA+BH,IAA/B,mBAA6CC,QAA7C,GACCG,IADD,CACM,SAAAC,QAAQ,CAAI,oBACQA,QAAQ,CAACC,IADjB,CACRC,IADQ,gBACRA,IADQ,CACFC,KADE,gBACFA,KADE,CAEhBN,QAAQ,CAAC,CACPV,IAAI,CAAEb,OAAO,CAACC,UADP,CAEPM,KAAK,CAAEqB,IAFA,CAGPpB,UAAU,CAAEqB,KAHL,CAAD,CAAR,CAKD,CARD,EASCC,KATD,CASO,SAAAC,KAAK,CAAI,CACdb,OAAO,CAACC,GAAR,CAAYY,KAAZ,EACD,CAXD,EAYD,CAbD,CAcD,CAfM,CAgBP;AACA,MAAO,IAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAAClB,EAAD,CAAQ,CACjC,MAAO,UAAAS,QAAQ,CAAI,CACjBzB,GAAG,CAAC0B,GAAJ,qBAAqBV,EAArB,GACCW,IADD,CACM,SAAAC,QAAQ,CAAI,CAChBH,QAAQ,CAAC,CACPV,IAAI,CAAEb,OAAO,CAACE,UADP,CAEPO,QAAQ,CAAEiB,QAAQ,CAACC,IAFZ,CAAD,CAAR,CAID,CAND,EAOCG,KAPD,CAOO,SAAAC,KAAK,CAAI,CACdb,OAAO,CAACC,GAAR,CAAYY,KAAZ,EACD,CATD,EAUD,CAXD,CAYD,CAbM,CAcP;AACA,MAAO,IAAME,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,OAAD,CAAUpB,EAAV,CAAcqB,MAAd,CAAyB,CACjD,MAAO,UAAAZ,QAAQ,CAAI,CACjBzB,GAAG,CAACsC,GAAJ,qBAAqBtB,EAArB,EAA2BoB,OAA3B,EACCT,IADD,CACM,SAAAC,QAAQ,CAAI,CAChBH,QAAQ,CAAC,CACPV,IAAI,CAAEb,OAAO,CAACI,WADP,CAAD,CAAR,CAGD,CALD,CAKGL,OAAO,CAACsC,IAAR,0BAA+BF,MAA/B,cAA0CrB,EAA1C,qBALH,EAMCgB,KAND,CAMO,SAAAC,KAAK,CAAI,CACdb,OAAO,CAACC,GAAR,CAAYY,KAAZ,EACD,CARD,EASD,CAVD,CAWD,CAZM,CAaP;AACA,MAAO,IAAMO,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACxB,EAAD,CAAQ,CACjC,MAAO,UAAAS,QAAQ,CAAI,CACjBzB,GAAG,CAACyC,MAAJ,qBAAwBzB,EAAxB,GACCW,IADD,CACM,SAAAC,QAAQ,CAAI,CAChBH,QAAQ,CAAC,CACPV,IAAI,CAAEb,OAAO,CAACK,WADP,CAEPS,EAAE,CAAEA,EAFG,CAAD,CAAR,CAID,CAND,EAOCgB,KAPD,CAOO,SAAAC,KAAK,CAAI,CACdb,OAAO,CAACC,GAAR,CAAYY,KAAZ,EACD,CATD,EAUD,CAXD,CAYD,CAbM","sourcesContent":["import api from '../services/api';\r\nimport history from '../services/history';\r\n\r\nconst ACTIONS = {\r\n  LIST_CALLS: 'LISTCALLS',\r\n  BY_ID_CALL: 'BYIDCALL',\r\n  ADD_CALL: 'ADDCALL',\r\n  UPDATE_CALL: 'UPDATECALL',\r\n  DELETE_CALL: 'DELETECALL',\r\n}\r\nconst INITIAL_STATE = {\r\n  calls: [],\r\n  infosCalls: [],\r\n  callById: [],\r\n}\r\nexport const callReducer = (state = INITIAL_STATE, action) => {\r\n  switch(action.type){\r\n    case ACTIONS.LIST_CALLS:\r\n      return {...state, calls: action.calls, infosCalls: action.infosCalls}\r\n    case ACTIONS.ADD_CALL:\r\n      return {...state}\r\n    case ACTIONS.BY_ID_CALL:\r\n      return {...state, callById: action.callById}\r\n    case ACTIONS.UPDATE_CALL:\r\n      return state;\r\n    case ACTIONS.DELETE_CALL:\r\n      const id = action.id;\r\n      const calls = state.calls.filter( call => call._id !== id);\r\n      console.log(calls);\r\n      return {...state, calls: calls}\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n//LISTAR CALLS\r\nexport const listCalls = (page, nOfItems) => {\r\n  return dispatch => {\r\n    api.get(`/adm/all-calls?page=${page}&limit=${nOfItems}`)\r\n    .then(Response => {\r\n      const { docs, infos } = Response.data;\r\n      dispatch({\r\n        type: ACTIONS.LIST_CALLS,\r\n        calls: docs,\r\n        infosCalls: infos,\r\n      })\r\n    })\r\n    .catch(error => {\r\n      console.log(error);\r\n    });\r\n  }\r\n}\r\n//GET BY ID CALL\r\nexport const getCallById = (id) => {\r\n  return dispatch => {\r\n    api.get(`/adm/call/${id}`)\r\n    .then(Response => {\r\n      dispatch({\r\n        type: ACTIONS.BY_ID_CALL,\r\n        callById: Response.data,\r\n      })\r\n    })\r\n    .catch(error => {\r\n      console.log(error);\r\n    })\r\n  }\r\n}\r\n//UPDATE CALL\r\nexport const updateCall = (company, id, idUser) => {\r\n  return dispatch => {\r\n    api.put(`/adm/call/${id}`, company)\r\n    .then(Response => {\r\n      dispatch({\r\n        type: ACTIONS.UPDATE_CALL,\r\n      })\r\n    }, history.push(`/suggest/call/?${idUser}/?${id}?page=1&limit=25`))\r\n    .catch(error => {\r\n      console.log(error)\r\n    })\r\n  }\r\n}\r\n//DELETE CALL\r\nexport const destroyCall = (id) => {\r\n  return dispatch => {\r\n    api.delete(`/adm/call/${id}`)\r\n    .then(Response => {\r\n      dispatch({\r\n        type: ACTIONS.DELETE_CALL,\r\n        id: id\r\n      })\r\n    })\r\n    .catch(error => {\r\n      console.log(error)\r\n    })\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}