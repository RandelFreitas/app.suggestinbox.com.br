{"ast":null,"code":"import api from '../services/api';\nimport history from '../services/history';\nimport { showMessage } from './messageReducer';\nconst ACTIONS = {\n  LIST_COMPANIES: 'LIST_COMPANIES',\n  BY_ID_COMPANY: 'BY_ID_COMPANY',\n  UPDATE_COMPANY: 'UPDATE_COMPANY',\n  ATV_COMPANY: 'ATV_COMPANY',\n  CLEAN_COMPANY: 'CLEAN_COMPANY',\n  ADD_COMPANY: 'ADD_COMPANY',\n  UPDATE_OUTLIER: 'UPDATE_OUTLIER'\n};\nconst INITIAL_STATE = {\n  companies: [],\n  companyById: [],\n  infosCompanies: [],\n  companyAtv: [],\n  suggest: []\n};\nexport const companyReducer = (state = INITIAL_STATE, action) => {\n  switch (action.type) {\n    case ACTIONS.LIST_COMPANIES:\n      return { ...state,\n        companies: action.companies,\n        infosCompanies: action.infosCompanies\n      };\n\n    case ACTIONS.ADD_COMPANY:\n      return { ...state\n      };\n\n    case ACTIONS.BY_ID_COMPANY:\n      return { ...state,\n        companyById: action.companyById\n      };\n\n    case ACTIONS.UPDATE_COMPANY:\n      return { ...state,\n        companyById: action.companyById\n      };\n\n    case ACTIONS.CLEAN_COMPANY:\n      return { ...state,\n        companyById: []\n      };\n\n    case ACTIONS.UPDATE_OUTLIER:\n      var company = [...state.companyById];\n      const suggest = action.suggest;\n\n      if (suggest.outiler) {\n        const totalStars = company.totalStars - suggest.stars;\n        const nOfStars = company.nStars - 1;\n        const downStars = totalStars / nOfStars;\n        company.nOfStars = nOfStars;\n        company.totalStars = totalStars;\n        company.stars = downStars;\n        return { ...state,\n          companyById: company\n        };\n      } else {\n        return { ...state,\n          companyById: company\n        };\n      }\n\n    case ACTIONS.ATV_COMPANY:\n      return { ...state\n      };\n\n    default:\n      return state;\n  }\n}; //LISTAR COMPANIAS\n\nexport const listCompanies = (page, nOfItems) => {\n  return dispatch => {\n    api.get(`/adm/company?page=${page}&limit=${nOfItems}`).then(Response => {\n      const {\n        docs,\n        infos\n      } = Response.data;\n      dispatch({\n        type: ACTIONS.LIST_COMPANIES,\n        companies: docs,\n        infosCompanies: infos\n      });\n\n      if (Response.data.error) {\n        dispatch(showMessage(Response.data.error));\n      }\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n}; //ADICIONAR COMPANY\n\nexport const addCompany = (company, idUser) => {\n  return dispatch => {\n    api.post('/adm/company', company).then(Response => {\n      dispatch({\n        type: ACTIONS.ADD_COMPANY\n      });\n\n      if (Response.data.error) {\n        dispatch(showMessage(Response.data.error));\n      } else {\n        dispatch(showMessage(\"Companhia cadastrada com sucesso!\"));\n        history.push(`/user/?${idUser}?page=1&limit=25`);\n      }\n    }).catch(error => {\n      dispatch(showMessage(\"Servido indisponivel, tente mais tarde!\"), console.log(error));\n    });\n  };\n}; //GET BY ID COMPANY\n\nexport const getCompanyById = id => {\n  return dispatch => {\n    api.get(`/adm/company/${id}`).then(Response => {\n      dispatch({\n        type: ACTIONS.BY_ID_COMPANY,\n        companyById: Response.data\n      });\n    }).catch(error => {\n      dispatch(showMessage(\"Servido indisponivel, tente mais tarde!\"), console.log(error));\n    });\n  };\n}; //UPDATE COMPANY\n\nexport const updateCompany = (company, idCompany, idUser) => {\n  return dispatch => {\n    api.put(`/adm/company/${idCompany}`, company).then(Response => {\n      dispatch({\n        type: ACTIONS.UPDATE_COMPANY,\n        companyById: Response.data\n      });\n\n      if (Response.data.error) {\n        dispatch(showMessage(Response.data.error), history.push(`/suggest/?${idUser}/?${idCompany}?page=1&limit=25`));\n      } else {\n        dispatch(showMessage('Companhia atualizada com sucesso!'), history.push(`/suggest/?${idUser}/?${idCompany}?page=1&limit=25`));\n      }\n    }).catch(error => {\n      dispatch(showMessage(\"Servido indisponivel, tente mais tarde!\"), console.log(error));\n    });\n  };\n}; //LIMPAR CAMPOS COMPANY NAS ATAULIZAÇÕES\n\nexport const cleanCompany = () => {\n  return {\n    type: ACTIONS.CLEAN_COMPANY\n  };\n}; //ATUALIZAR STARS COMPANY\n\nexport const updateOutlier = suggest => {\n  return {\n    type: ACTIONS.UPDATE_OUTLIER,\n    suggest: suggest\n  };\n}; //ATIVAR / DESATIVAR: MENU, PROMO, CALL\n\nexport const atvCompany = company => {\n  return dispatch => {\n    api.put(`/adm/company/${company._id}`, company).then(Response => {\n      dispatch({\n        type: ACTIONS.ATV_COMPANY\n      });\n\n      if (Response.data.error) {\n        dispatch(showMessage(Response.data.error));\n      }\n    }).catch(error => {\n      dispatch(showMessage(\"Servido indisponivel, tente mais tarde!\"), console.log(error));\n    });\n  };\n};","map":{"version":3,"sources":["D:/Randel/PROJETO 2020/SuggestInBox/app.suggestinbox.com.br/src/store/companyReducer.js"],"names":["api","history","showMessage","ACTIONS","LIST_COMPANIES","BY_ID_COMPANY","UPDATE_COMPANY","ATV_COMPANY","CLEAN_COMPANY","ADD_COMPANY","UPDATE_OUTLIER","INITIAL_STATE","companies","companyById","infosCompanies","companyAtv","suggest","companyReducer","state","action","type","company","outiler","totalStars","stars","nOfStars","nStars","downStars","listCompanies","page","nOfItems","dispatch","get","then","Response","docs","infos","data","error","catch","console","log","addCompany","idUser","post","push","getCompanyById","id","updateCompany","idCompany","put","cleanCompany","updateOutlier","atvCompany","_id"],"mappings":"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","sourcesContent":["import api from '../services/api';\r\nimport history from '../services/history';\r\nimport { showMessage } from './messageReducer';\r\n\r\nconst ACTIONS = {\r\n  LIST_COMPANIES: 'LIST_COMPANIES',\r\n  BY_ID_COMPANY: 'BY_ID_COMPANY',\r\n  UPDATE_COMPANY: 'UPDATE_COMPANY',\r\n  ATV_COMPANY: 'ATV_COMPANY',\r\n  CLEAN_COMPANY: 'CLEAN_COMPANY',\r\n  ADD_COMPANY: 'ADD_COMPANY',\r\n  UPDATE_OUTLIER: 'UPDATE_OUTLIER'\r\n}\r\nconst INITIAL_STATE = {\r\n  companies: [],\r\n  companyById: [],\r\n  infosCompanies: [],\r\n  companyAtv: [],\r\n  suggest: []\r\n}\r\nexport const companyReducer = (state = INITIAL_STATE, action) => {\r\n  switch(action.type){\r\n    case ACTIONS.LIST_COMPANIES:\r\n      return {...state, companies: action.companies, infosCompanies: action.infosCompanies}\r\n    case ACTIONS.ADD_COMPANY:\r\n      return {...state}\r\n    case ACTIONS.BY_ID_COMPANY:\r\n      return {...state, companyById: action.companyById}\r\n    case ACTIONS.UPDATE_COMPANY:\r\n      return {...state, companyById: action.companyById};\r\n    case ACTIONS.CLEAN_COMPANY:\r\n      return {...state, companyById: []}\r\n    case ACTIONS.UPDATE_OUTLIER:\r\n      var company = [...state.companyById];\r\n      const suggest = action.suggest;\r\n      if(suggest.outiler){\r\n        const totalStars = company.totalStars - suggest.stars;\r\n        const nOfStars = company.nStars - 1;\r\n        const downStars = (totalStars/nOfStars);\r\n        company.nOfStars = nOfStars;\r\n        company.totalStars = totalStars;\r\n        company.stars = downStars;\r\n\r\n        return {...state, companyById: company}\r\n      }else{\r\n        return {...state, companyById: company}\r\n      }\r\n    case ACTIONS.ATV_COMPANY:\r\n      return {...state}\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n//LISTAR COMPANIAS\r\nexport const listCompanies = (page, nOfItems) => {\r\n  return dispatch => {\r\n    api.get(`/adm/company?page=${page}&limit=${nOfItems}`)\r\n    .then(Response => {\r\n      const { docs, infos } = Response.data;\r\n      dispatch({\r\n        type: ACTIONS.LIST_COMPANIES,\r\n        companies: docs,\r\n        infosCompanies: infos,\r\n      });\r\n      if(Response.data.error){\r\n        dispatch(\r\n          showMessage(Response.data.error),\r\n        )\r\n      }\r\n    })\r\n    .catch(error => {\r\n      console.log(error);\r\n    });\r\n  }\r\n}\r\n//ADICIONAR COMPANY\r\nexport const addCompany = (company, idUser) => {\r\n  return dispatch => {\r\n    api.post('/adm/company', company)\r\n    .then(Response => {\r\n      dispatch({\r\n        type: ACTIONS.ADD_COMPANY,\r\n      });\r\n      if(Response.data.error){\r\n        dispatch(\r\n          showMessage(Response.data.error)\r\n        )\r\n      }else{\r\n        dispatch(\r\n          showMessage(\"Companhia cadastrada com sucesso!\")\r\n        );\r\n        history.push(`/user/?${idUser}?page=1&limit=25`)\r\n      }\r\n    })\r\n    .catch(error => {\r\n      dispatch(\r\n        showMessage(\"Servido indisponivel, tente mais tarde!\"),\r\n        console.log(error)\r\n      )\r\n    });\r\n  }\r\n}\r\n//GET BY ID COMPANY\r\nexport const getCompanyById = (id) => {\r\n  return dispatch => {\r\n    api.get(`/adm/company/${id}`)\r\n    .then(Response => {\r\n      dispatch({\r\n        type: ACTIONS.BY_ID_COMPANY,\r\n        companyById: Response.data,\r\n      })\r\n    })\r\n    .catch(error => {\r\n      dispatch(\r\n        showMessage(\"Servido indisponivel, tente mais tarde!\"),\r\n        console.log(error)\r\n      )\r\n    })\r\n  }\r\n}\r\n//UPDATE COMPANY\r\nexport const updateCompany = (company, idCompany, idUser) => {\r\n  return dispatch => {\r\n    api.put(`/adm/company/${idCompany}`, company)\r\n    .then(Response => {\r\n      dispatch({\r\n        type: ACTIONS.UPDATE_COMPANY,\r\n        companyById: Response.data,\r\n      });\r\n      if(Response.data.error){\r\n        dispatch(\r\n          showMessage(Response.data.error),\r\n          history.push(`/suggest/?${idUser}/?${idCompany}?page=1&limit=25`)\r\n        )\r\n      }else{\r\n        dispatch(\r\n          showMessage('Companhia atualizada com sucesso!'),\r\n          history.push(`/suggest/?${idUser}/?${idCompany}?page=1&limit=25`)\r\n        )\r\n      }\r\n    })\r\n    .catch(error => {\r\n      dispatch(\r\n        showMessage(\"Servido indisponivel, tente mais tarde!\"),\r\n        console.log(error)\r\n      )\r\n    });\r\n  }\r\n}\r\n//LIMPAR CAMPOS COMPANY NAS ATAULIZAÇÕES\r\nexport const cleanCompany = () => {\r\n  return {\r\n    type: ACTIONS.CLEAN_COMPANY,\r\n  }\r\n}\r\n//ATUALIZAR STARS COMPANY\r\nexport const updateOutlier = (suggest) => {\r\n  return {\r\n    type: ACTIONS.UPDATE_OUTLIER,\r\n    suggest: suggest\r\n  }\r\n}\r\n//ATIVAR / DESATIVAR: MENU, PROMO, CALL\r\nexport const atvCompany = (company) => {\r\n  return dispatch => {\r\n    api.put(`/adm/company/${company._id}`, company)\r\n    .then(Response => {\r\n      dispatch({\r\n        type: ACTIONS.ATV_COMPANY,\r\n      });\r\n      if(Response.data.error){\r\n        dispatch(\r\n          showMessage(Response.data.error)\r\n        )\r\n      }\r\n    })\r\n    .catch(error => {\r\n      dispatch(\r\n        showMessage(\"Servido indisponivel, tente mais tarde!\"),\r\n        console.log(error)\r\n      )\r\n    })\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}