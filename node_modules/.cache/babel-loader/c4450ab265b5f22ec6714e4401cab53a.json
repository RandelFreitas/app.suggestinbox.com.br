{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar ScratchCard = function (_Component) {\n  _inherits(ScratchCard, _Component);\n\n  function ScratchCard(props) {\n    _classCallCheck(this, ScratchCard);\n\n    var _this = _possibleConstructorReturn(this, (ScratchCard.__proto__ || Object.getPrototypeOf(ScratchCard)).call(this, props));\n\n    _this.state = {\n      loaded: false\n    };\n    return _this;\n  }\n\n  _createClass(ScratchCard, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.isDrawing = false;\n      this.lastPoint = null;\n      this.ctx = this.canvas.getContext('2d');\n      var image = new Image();\n      image.crossOrigin = \"Anonymous\";\n\n      image.onload = function () {\n        _this2.ctx.drawImage(image, 0, 0);\n\n        _this2.setState({\n          loaded: true\n        });\n      };\n\n      image.src = this.props.image;\n    }\n  }, {\n    key: 'getFilledInPixels',\n    value: function getFilledInPixels(stride) {\n      if (!stride || stride < 1) {\n        stride = 1;\n      }\n\n      var pixels = this.ctx.getImageData(0, 0, this.canvas.width, this.canvas.height);\n      var total = pixels.data.length / stride;\n      var count = 0;\n\n      for (var i = 0; i < pixels.data.length; i += stride) {\n        if (parseInt(pixels.data[i], 10) === 0) {\n          count++;\n        }\n      }\n\n      return Math.round(count / total * 100);\n    }\n  }, {\n    key: 'getMouse',\n    value: function getMouse(e, canvas) {\n      var offsetX = 0;\n      var offsetY = 0;\n      var mx = void 0,\n          my = void 0;\n\n      if (canvas.offsetParent !== undefined) {\n        do {\n          offsetX += canvas.offsetLeft;\n          offsetY += canvas.offsetTop;\n        } while (canvas = canvas.offsetParent);\n      }\n\n      mx = (e.pageX || e.touches[0].clientX) - offsetX;\n      my = (e.pageY || e.touches[0].clientY) - offsetY;\n      return {\n        x: mx,\n        y: my\n      };\n    }\n  }, {\n    key: 'distanceBetween',\n    value: function distanceBetween(point1, point2) {\n      return Math.sqrt(Math.pow(point2.x - point1.x, 2) + Math.pow(point2.y - point1.y, 2));\n    }\n  }, {\n    key: 'angleBetween',\n    value: function angleBetween(point1, point2) {\n      return Math.atan2(point2.x - point1.x, point2.y - point1.y);\n    }\n  }, {\n    key: 'handlePercentage',\n    value: function handlePercentage() {\n      var filledInPixels = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      if (filledInPixels > this.props.finishPercent) {\n        this.canvas.parentNode.removeChild(this.canvas);\n        this.setState({\n          finished: true\n        });\n\n        if (this.props.onComplete) {\n          this.props.onComplete();\n        }\n      }\n    }\n  }, {\n    key: 'handleMouseDown',\n    value: function handleMouseDown(e) {\n      this.isDrawing = true;\n      this.lastPoint = this.getMouse(e, this.canvas);\n    }\n  }, {\n    key: 'handleMouseMove',\n    value: function handleMouseMove(e) {\n      if (!this.isDrawing) {\n        return;\n      }\n\n      e.preventDefault();\n      var currentPoint = this.getMouse(e, this.canvas);\n      var distance = this.distanceBetween(this.lastPoint, currentPoint);\n      var angle = this.angleBetween(this.lastPoint, currentPoint);\n      var x = void 0,\n          y = void 0;\n\n      for (var i = 0; i < distance; i++) {\n        x = this.lastPoint.x + Math.sin(angle) * i;\n        y = this.lastPoint.y + Math.cos(angle) * i;\n        this.ctx.globalCompositeOperation = 'destination-out';\n        this.ctx.beginPath();\n        this.ctx.arc(x, y, 25, 0, 2 * Math.PI, false);\n        this.ctx.fill();\n      }\n\n      this.lastPoint = currentPoint;\n      this.handlePercentage(this.getFilledInPixels(32));\n    }\n  }, {\n    key: 'handleMouseUp',\n    value: function handleMouseUp() {\n      this.isDrawing = false;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this3 = this;\n\n      var containerStyle = {\n        width: this.props.width + 'px',\n        height: this.props.height + 'px',\n        position: 'relative',\n        WebkitUserSelect: 'none',\n        MozUserSelect: 'none',\n        msUserSelect: 'none',\n        userSelect: 'none'\n      };\n      var canvasStyle = {\n        position: 'absolute',\n        top: 0,\n        zIndex: 1\n      };\n      var resultStyle = {\n        visibility: this.state.loaded ? 'visible' : 'hidden'\n      };\n      var canvasProps = {\n        ref: function ref(_ref) {\n          return _this3.canvas = _ref;\n        },\n        className: 'ScratchCard__Canvas',\n        style: canvasStyle,\n        width: this.props.width,\n        height: this.props.height,\n        onMouseDown: this.handleMouseDown.bind(this),\n        onTouchStart: this.handleMouseDown.bind(this),\n        onMouseMove: this.handleMouseMove.bind(this),\n        onTouchMove: this.handleMouseMove.bind(this),\n        onMouseUp: this.handleMouseUp.bind(this),\n        onTouchEnd: this.handleMouseUp.bind(this)\n      };\n      return _react2.default.createElement('div', {\n        className: 'ScratchCard__Container',\n        style: containerStyle\n      }, _react2.default.createElement('canvas', canvasProps), _react2.default.createElement('div', {\n        className: 'ScratchCard__Result',\n        style: resultStyle\n      }, this.props.children));\n    }\n  }]);\n\n  return ScratchCard;\n}(_react.Component);\n\nScratchCard.propTypes = {\n  image: _react2.default.PropTypes.string.isRequired,\n  width: _react2.default.PropTypes.number.isRequired,\n  height: _react2.default.PropTypes.number.isRequired,\n  finishPercent: _react2.default.PropTypes.number.isRequired,\n  onComplete: _react2.default.PropTypes.func\n};\nvar _default = ScratchCard;\nexports.default = _default;\n;\n\nvar _temp = function () {\n  if (typeof __REACT_HOT_LOADER__ === 'undefined') {\n    return;\n  }\n\n  __REACT_HOT_LOADER__.register(ScratchCard, 'ScratchCard', 'src/index.js');\n\n  __REACT_HOT_LOADER__.register(_default, 'default', 'src/index.js');\n}();\n\n;","map":{"version":3,"sources":["D:/Randel/PROJETO 2020/SuggestInBox/app.suggestinbox.com.br/node_modules/react-scratchcard/dist/index.js"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_react","require","_react2","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","ScratchCard","_Component","_this","getPrototypeOf","state","loaded","componentDidMount","_this2","isDrawing","lastPoint","ctx","canvas","getContext","image","Image","crossOrigin","onload","drawImage","setState","src","getFilledInPixels","stride","pixels","getImageData","width","height","total","data","count","parseInt","Math","round","getMouse","e","offsetX","offsetY","mx","my","offsetParent","undefined","offsetLeft","offsetTop","pageX","touches","clientX","pageY","clientY","x","y","distanceBetween","point1","point2","sqrt","pow","angleBetween","atan2","handlePercentage","filledInPixels","arguments","finishPercent","parentNode","removeChild","finished","onComplete","handleMouseDown","handleMouseMove","preventDefault","currentPoint","distance","angle","sin","cos","globalCompositeOperation","beginPath","arc","PI","fill","handleMouseUp","render","_this3","containerStyle","position","WebkitUserSelect","MozUserSelect","msUserSelect","userSelect","canvasStyle","top","zIndex","resultStyle","visibility","canvasProps","ref","_ref","className","style","onMouseDown","bind","onTouchStart","onMouseMove","onTouchMove","onMouseUp","onTouchEnd","createElement","children","Component","propTypes","PropTypes","string","isRequired","number","func","_default","_temp","__REACT_HOT_LOADER__","register"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ScratchCard = function (_Component) {\n  _inherits(ScratchCard, _Component);\n\n  function ScratchCard(props) {\n    _classCallCheck(this, ScratchCard);\n\n    var _this = _possibleConstructorReturn(this, (ScratchCard.__proto__ || Object.getPrototypeOf(ScratchCard)).call(this, props));\n\n    _this.state = { loaded: false };\n    return _this;\n  }\n\n  _createClass(ScratchCard, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.isDrawing = false;\n      this.lastPoint = null;\n      this.ctx = this.canvas.getContext('2d');\n\n      var image = new Image();\n      image.crossOrigin = \"Anonymous\";\n      image.onload = function () {\n        _this2.ctx.drawImage(image, 0, 0);\n        _this2.setState({ loaded: true });\n      };\n      image.src = this.props.image;\n    }\n  }, {\n    key: 'getFilledInPixels',\n    value: function getFilledInPixels(stride) {\n      if (!stride || stride < 1) {\n        stride = 1;\n      }\n\n      var pixels = this.ctx.getImageData(0, 0, this.canvas.width, this.canvas.height);\n      var total = pixels.data.length / stride;\n      var count = 0;\n\n      for (var i = 0; i < pixels.data.length; i += stride) {\n        if (parseInt(pixels.data[i], 10) === 0) {\n          count++;\n        }\n      }\n\n      return Math.round(count / total * 100);\n    }\n  }, {\n    key: 'getMouse',\n    value: function getMouse(e, canvas) {\n      var offsetX = 0;\n      var offsetY = 0;\n      var mx = void 0,\n          my = void 0;\n\n      if (canvas.offsetParent !== undefined) {\n        do {\n          offsetX += canvas.offsetLeft;\n          offsetY += canvas.offsetTop;\n        } while (canvas = canvas.offsetParent);\n      }\n\n      mx = (e.pageX || e.touches[0].clientX) - offsetX;\n      my = (e.pageY || e.touches[0].clientY) - offsetY;\n\n      return { x: mx, y: my };\n    }\n  }, {\n    key: 'distanceBetween',\n    value: function distanceBetween(point1, point2) {\n      return Math.sqrt(Math.pow(point2.x - point1.x, 2) + Math.pow(point2.y - point1.y, 2));\n    }\n  }, {\n    key: 'angleBetween',\n    value: function angleBetween(point1, point2) {\n      return Math.atan2(point2.x - point1.x, point2.y - point1.y);\n    }\n  }, {\n    key: 'handlePercentage',\n    value: function handlePercentage() {\n      var filledInPixels = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      if (filledInPixels > this.props.finishPercent) {\n        this.canvas.parentNode.removeChild(this.canvas);\n        this.setState({ finished: true });\n        if (this.props.onComplete) {\n          this.props.onComplete();\n        }\n      }\n    }\n  }, {\n    key: 'handleMouseDown',\n    value: function handleMouseDown(e) {\n      this.isDrawing = true;\n      this.lastPoint = this.getMouse(e, this.canvas);\n    }\n  }, {\n    key: 'handleMouseMove',\n    value: function handleMouseMove(e) {\n      if (!this.isDrawing) {\n        return;\n      }\n\n      e.preventDefault();\n\n      var currentPoint = this.getMouse(e, this.canvas);\n      var distance = this.distanceBetween(this.lastPoint, currentPoint);\n      var angle = this.angleBetween(this.lastPoint, currentPoint);\n\n      var x = void 0,\n          y = void 0;\n\n      for (var i = 0; i < distance; i++) {\n        x = this.lastPoint.x + Math.sin(angle) * i;\n        y = this.lastPoint.y + Math.cos(angle) * i;\n        this.ctx.globalCompositeOperation = 'destination-out';\n        this.ctx.beginPath();\n        this.ctx.arc(x, y, 25, 0, 2 * Math.PI, false);\n        this.ctx.fill();\n      }\n\n      this.lastPoint = currentPoint;\n      this.handlePercentage(this.getFilledInPixels(32));\n    }\n  }, {\n    key: 'handleMouseUp',\n    value: function handleMouseUp() {\n      this.isDrawing = false;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this3 = this;\n\n      var containerStyle = {\n        width: this.props.width + 'px',\n        height: this.props.height + 'px',\n        position: 'relative',\n        WebkitUserSelect: 'none',\n        MozUserSelect: 'none',\n        msUserSelect: 'none',\n        userSelect: 'none'\n      };\n\n      var canvasStyle = {\n        position: 'absolute',\n        top: 0,\n        zIndex: 1\n      };\n\n      var resultStyle = {\n        visibility: this.state.loaded ? 'visible' : 'hidden'\n      };\n\n      var canvasProps = {\n        ref: function ref(_ref) {\n          return _this3.canvas = _ref;\n        },\n        className: 'ScratchCard__Canvas',\n        style: canvasStyle,\n        width: this.props.width,\n        height: this.props.height,\n        onMouseDown: this.handleMouseDown.bind(this),\n        onTouchStart: this.handleMouseDown.bind(this),\n        onMouseMove: this.handleMouseMove.bind(this),\n        onTouchMove: this.handleMouseMove.bind(this),\n        onMouseUp: this.handleMouseUp.bind(this),\n        onTouchEnd: this.handleMouseUp.bind(this)\n      };\n\n      return _react2.default.createElement(\n        'div',\n        { className: 'ScratchCard__Container', style: containerStyle },\n        _react2.default.createElement('canvas', canvasProps),\n        _react2.default.createElement(\n          'div',\n          { className: 'ScratchCard__Result', style: resultStyle },\n          this.props.children\n        )\n      );\n    }\n  }]);\n\n  return ScratchCard;\n}(_react.Component);\n\nScratchCard.propTypes = {\n  image: _react2.default.PropTypes.string.isRequired,\n  width: _react2.default.PropTypes.number.isRequired,\n  height: _react2.default.PropTypes.number.isRequired,\n  finishPercent: _react2.default.PropTypes.number.isRequired,\n  onComplete: _react2.default.PropTypes.func\n};\n\nvar _default = ScratchCard;\nexports.default = _default;\n;\n\nvar _temp = function () {\n  if (typeof __REACT_HOT_LOADER__ === 'undefined') {\n    return;\n  }\n\n  __REACT_HOT_LOADER__.register(ScratchCard, 'ScratchCard', 'src/index.js');\n\n  __REACT_HOT_LOADER__.register(_default, 'default', 'src/index.js');\n}();\n\n;"]},"metadata":{},"sourceType":"script"}