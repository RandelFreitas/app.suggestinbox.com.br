{"ast":null,"code":"import _objectSpread from\"D:\\\\Randel\\\\PROJETO 2020\\\\SuggestInBox\\\\app.suggestinbox.com.br\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import api from'../services/api';import history from'../services/history';import{setInfosLocalStorage,logoutUser}from'../services/auth';import{showMessage}from'./messageReducer';var ACTIONS={AUTH:'AUTH',FOGOT:'FOGOT'};var INITIAL_STATE={infos:[],email:[],user:[]};export var authReducer=function authReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:INITIAL_STATE;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ACTIONS.AUTH:return _objectSpread({},state,{infos:action.infos});case ACTIONS.FOGOT:return _objectSpread({},state,{email:action.email});case ACTIONS.RESET:return _objectSpread({},state,{user:action.user});default:return state;}};//AUTENTICAÇÃO\nexport var auth=function auth(login){return function(dispatch){api.post('/auth',login).then(function(Response){dispatch({type:ACTIONS.AUTH,infos:Response.data},setInfosLocalStorage(Response.data.token,Response.data.user),history.push(\"/user?page=1&limit=25/?\".concat(Response.data.user._id)));}).catch(function(error){dispatch(showMessage(\"Email ou senha inválidos!\"));});};};//ESQUECI SENHA\nexport var fogot=function fogot(email){return function(dispatch){api.post('/auth/fogot',email).then(function(Response){dispatch({type:ACTIONS.FOGOT,email:Response.data},dispatch(showMessage(\"Email enviado com sucesso!\")),history.push('/login'));}).catch(function(erro){dispatch(showMessage(\"Este email não está atribuido a nenhum usuário!\"));});};};//RESET SENHA\nexport var reset=function reset(user){return function(dispatch){api.post('/auth/reset_password',user).then(function(Response){dispatch({type:ACTIONS.FOGOT,user:Response.data});}).catch(function(error){dispatch(showMessage(\"Serviço indisponível, tente mais tarde!\"));});};};//LOGOUT\nexport var logout=function logout(){logoutUser();history.push(\"/login\");};","map":{"version":3,"sources":["D:/Randel/PROJETO 2020/SuggestInBox/app.suggestinbox.com.br/src/store/authReducer.js"],"names":["api","history","setInfosLocalStorage","logoutUser","showMessage","ACTIONS","AUTH","FOGOT","INITIAL_STATE","infos","email","user","authReducer","state","action","type","RESET","auth","login","dispatch","post","then","Response","data","token","push","_id","catch","error","fogot","erro","reset","logout"],"mappings":"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","sourcesContent":["import api from '../services/api';\r\nimport history from '../services/history';\r\nimport { setInfosLocalStorage, logoutUser } from '../services/auth';\r\nimport { showMessage } from './messageReducer';\r\n\r\nconst ACTIONS = {\r\n  AUTH: 'AUTH',\r\n  FOGOT: 'FOGOT'\r\n}\r\nconst INITIAL_STATE = {\r\n  infos:[],\r\n  email:[],\r\n  user:[]\r\n}\r\nexport const authReducer = (state = INITIAL_STATE, action) => {\r\n  switch(action.type){\r\n    case ACTIONS.AUTH:\r\n      return {...state, infos: action.infos}\r\n    case ACTIONS.FOGOT:\r\n      return {...state, email: action.email}\r\n    case ACTIONS.RESET:\r\n      return {...state, user: action.user}\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n//AUTENTICAÇÃO\r\nexport const auth = (login) => {\r\n  return dispatch => {\r\n    api.post('/auth', login)\r\n    .then(Response => {\r\n      dispatch({\r\n        type: ACTIONS.AUTH,\r\n        infos: Response.data,\r\n      },\r\n        setInfosLocalStorage(Response.data.token, Response.data.user),\r\n        history.push(`/user?page=1&limit=25/?${Response.data.user._id}`)\r\n      );\r\n    })\r\n    .catch(error => {\r\n      dispatch(\r\n        showMessage(\"Email ou senha inválidos!\")\r\n      )}\r\n    )\r\n  }\r\n}\r\n//ESQUECI SENHA\r\nexport const fogot = (email) => {\r\n  return dispatch => {\r\n    api.post('/auth/fogot', email)\r\n    .then(Response => {\r\n      dispatch({\r\n        type: ACTIONS.FOGOT,\r\n        email: Response.data,\r\n      },dispatch(\r\n          showMessage(\"Email enviado com sucesso!\")\r\n        ), \r\n        history.push('/login'));\r\n    })\r\n    .catch(erro => {\r\n      dispatch(\r\n        showMessage(\"Este email não está atribuido a nenhum usuário!\")\r\n      )}\r\n    );\r\n  }\r\n}\r\n//RESET SENHA\r\nexport const reset = (user) => {\r\n  return dispatch => {\r\n    api.post('/auth/reset_password', user)\r\n    .then(Response => {\r\n      dispatch({\r\n          type: ACTIONS.FOGOT,\r\n          user: Response.data,\r\n      });\r\n    })\r\n    .catch(error => {\r\n      dispatch(\r\n        showMessage(\"Serviço indisponível, tente mais tarde!\")\r\n      )}\r\n    );\r\n  }\r\n}\r\n//LOGOUT\r\nexport const logout = () =>{\r\n  logoutUser();\r\n  history.push(`/login`);\r\n}"]},"metadata":{},"sourceType":"module"}