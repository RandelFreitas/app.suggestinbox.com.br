{"ast":null,"code":"import api from '../services/api';\nimport history from \"../services/history\";\nconst ACTIONS = {\n  INFOS: 'INFOS',\n  ADD: 'ADD_SUGGEST',\n  GET_MENU: 'GET_MENU'\n};\nconst INITIAL_STATE = {\n  infos: [],\n  idTable: [],\n  suggest: [],\n  menu: [],\n  sectionMenu: [],\n  itemMenu: []\n};\nexport const clientReducer = (state = INITIAL_STATE, action) => {\n  switch (action.type) {\n    case ACTIONS.INFOS:\n      return { ...state,\n        infos: action.infos,\n        idTable: action.idTable\n      };\n\n    case ACTIONS.GET_MENU:\n      return { ...state,\n        menu: action.menu,\n        sectionMenu: action.sectionMenu,\n        itemMenu: action.itemMenu\n      };\n\n    case ACTIONS.ADD:\n      return { ...state,\n        suggest: action.suggest\n      };\n\n    default:\n      return state;\n  }\n}; //OBTER INFOS DA COMPANIA\n\nexport const getInfo = (idCompany, idTable) => {\n  return dispatch => {\n    api.get(`/client/company/${idCompany}`).then(Response => {\n      dispatch({\n        type: ACTIONS.INFOS,\n        infos: Response.data,\n        idTable: idTable\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n}; //ENVIAR SUGGEST\n\nexport const submitSuggest = suggest => {\n  if (suggest.recommends === 'y') {\n    suggest.recommends = true;\n  } else {\n    suggest.recommends = false;\n  }\n\n  return dispatch => {\n    api.post(`/client/company/${suggest.companyId}`, suggest).then(Response => {\n      dispatch({\n        type: ACTIONS.ADD,\n        suggest: Response.data\n      });\n    }, history.push(`/client/opiniao/sucesso/?${suggest.companyId}`)).catch(error => {\n      console.log(error);\n    });\n  };\n}; //LISTAR MENU\n\nexport const getMenu = idCompany => {\n  return dispatch => {\n    api.get(`/client/company/menu/${idCompany}`).then(Response => {\n      dispatch({\n        type: ACTIONS.GET_MENU,\n        menu: Response.data,\n        sectionMenu: Response.data.sectionMenu,\n        itemMenu: Response.data.sectionMenu.itemMenu\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n}; //ENVIAR CALL\n\nexport const addCall = (idCompany, idTable) => {\n  const call = {\n    table: idTable,\n    companyId: idCompany\n  };\n  console.log(call);\n  return dispatch => {\n    api.post(`/client/company/call/${idCompany}`, call).then(Response => {\n      dispatch({\n        type: ACTIONS.ADD_CALL\n      });\n    }) //history.push(`/suggest/call/success`))\n    .catch(error => {\n      console.log(error);\n    });\n  };\n};","map":{"version":3,"sources":["D:/Randel/PROJETO 2020/SuggestInBox/app.suggestinbox.com.br/src/store/clientReducer.js"],"names":["api","history","ACTIONS","INFOS","ADD","GET_MENU","INITIAL_STATE","infos","idTable","suggest","menu","sectionMenu","itemMenu","clientReducer","state","action","type","getInfo","idCompany","dispatch","get","then","Response","data","catch","error","console","log","submitSuggest","recommends","post","companyId","push","getMenu","addCall","call","table","ADD_CALL"],"mappings":"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","sourcesContent":["import api from '../services/api';\r\nimport history from \"../services/history\";\r\n\r\nconst ACTIONS = {\r\n  INFOS: 'INFOS',\r\n  ADD: 'ADD_SUGGEST',\r\n  GET_MENU: 'GET_MENU'\r\n}\r\nconst INITIAL_STATE = {\r\n  infos:[],\r\n  idTable: [],\r\n  suggest:[],\r\n  menu: [],\r\n  sectionMenu: [],\r\n  itemMenu: []\r\n}\r\nexport const clientReducer = (state = INITIAL_STATE, action) => {\r\n  switch(action.type){\r\n    case ACTIONS.INFOS:\r\n      return {...state, infos: action.infos, idTable: action.idTable}\r\n    case ACTIONS.GET_MENU:\r\n      return {...state, menu: action.menu, sectionMenu: action.sectionMenu, itemMenu: action.itemMenu}\r\n    case ACTIONS.ADD:\r\n      return {...state, suggest: action.suggest}\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n//OBTER INFOS DA COMPANIA\r\nexport const getInfo = (idCompany, idTable) => {\r\n  return dispatch => {\r\n    api.get(`/client/company/${idCompany}`)\r\n    .then(Response => {\r\n      dispatch({\r\n        type: ACTIONS.INFOS,\r\n        infos: Response.data,\r\n        idTable: idTable\r\n      });\r\n    })\r\n    .catch(error => {\r\n      console.log(error);\r\n    });\r\n  }\r\n}\r\n//ENVIAR SUGGEST\r\nexport const submitSuggest = (suggest) => {\r\n  if(suggest.recommends === 'y'){\r\n    suggest.recommends = true;\r\n  }else{\r\n    suggest.recommends = false;\r\n  }\r\n  return dispatch => {\r\n    api.post(`/client/company/${suggest.companyId}`, suggest)\r\n    .then(Response => {\r\n      dispatch({\r\n        type: ACTIONS.ADD,\r\n        suggest: Response.data,\r\n      });\r\n    }, history.push(`/client/opiniao/sucesso/?${suggest.companyId}`))\r\n    .catch(error => {\r\n      console.log(error);\r\n    });\r\n  }\r\n}\r\n//LISTAR MENU\r\nexport const getMenu = (idCompany) => {\r\n  return dispatch => {\r\n    api.get(`/client/company/menu/${idCompany}`)\r\n    .then(Response => {\r\n      dispatch({\r\n        type: ACTIONS.GET_MENU,\r\n        menu: Response.data,\r\n        sectionMenu: Response.data.sectionMenu,\r\n        itemMenu: Response.data.sectionMenu.itemMenu\r\n      })\r\n    })\r\n    .catch(error => {\r\n      console.log(error);\r\n    });\r\n  }\r\n}\r\n//ENVIAR CALL\r\nexport const addCall = (idCompany, idTable) => {\r\n  const call = {\r\n    table: idTable,\r\n    companyId: idCompany\r\n  };\r\n  console.log(call);\r\n  return dispatch => {\r\n    api.post(`/client/company/call/${idCompany}`, call)\r\n    .then(Response => {\r\n      dispatch({\r\n        type: ACTIONS.ADD_CALL,\r\n      });\r\n    }) //history.push(`/suggest/call/success`))\r\n    .catch(error => {\r\n      console.log(error);\r\n    });\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}