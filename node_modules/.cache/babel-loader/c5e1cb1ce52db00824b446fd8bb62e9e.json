{"ast":null,"code":"import api from '../services/api';\nimport history from '../services/history';\nimport { setInfosLocalStorage, logoutUser } from '../services/auth';\nconst ACTIONS = {\n  AUTH: 'AUTH',\n  FOGOT: 'FOGOT'\n};\nconst INITIAL_STATE = {\n  infos: [],\n  email: []\n};\nexport const authReducer = (state = INITIAL_STATE, action) => {\n  switch (action.type) {\n    case ACTIONS.AUTH:\n      return { ...state,\n        infos: action.infos\n      };\n\n    case ACTIONS.FOGOT:\n      return { ...state,\n        email: action.email\n      };\n\n    default:\n      return state;\n  }\n};\nexport const auth = login => {\n  return dispatch => {\n    api.post('/auth', login).then(Response => {\n      dispatch({\n        type: ACTIONS.AUTH,\n        infos: Response.data\n      }, setInfosLocalStorage(Response.data.token, Response.data.user), history.push(`/user?page=1&limit=25`));\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n};\nexport const fogot = email => {\n  return dispatch => {\n    api.post('/auth/fogot', email).then(Response => {\n      dispatch({\n        type: ACTIONS.FOGOT,\n        email: Response.data\n      }, history.push(`/login`));\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n};\nexport const logout = () => {\n  logoutUser();\n  history.push(`/login`);\n};","map":{"version":3,"sources":["D:/Randel/PROJETO 2020/SuggestInBox/SuggestInBoxFront/src/store/authReducer.js"],"names":["api","history","setInfosLocalStorage","logoutUser","ACTIONS","AUTH","FOGOT","INITIAL_STATE","infos","email","authReducer","state","action","type","auth","login","dispatch","post","then","Response","data","token","user","push","catch","error","console","log","fogot","logout"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,iBAAhB;AACA,OAAOC,OAAP,MAAoB,qBAApB;AACA,SAASC,oBAAT,EAA+BC,UAA/B,QAAiD,kBAAjD;AAEA,MAAMC,OAAO,GAAG;AACdC,EAAAA,IAAI,EAAE,MADQ;AAEdC,EAAAA,KAAK,EAAE;AAFO,CAAhB;AAIA,MAAMC,aAAa,GAAG;AACpBC,EAAAA,KAAK,EAAC,EADc;AAEpBC,EAAAA,KAAK,EAAC;AAFc,CAAtB;AAIA,OAAO,MAAMC,WAAW,GAAG,CAACC,KAAK,GAAGJ,aAAT,EAAwBK,MAAxB,KAAmC;AAC5D,UAAOA,MAAM,CAACC,IAAd;AACE,SAAKT,OAAO,CAACC,IAAb;AACE,aAAO,EAAC,GAAGM,KAAJ;AAAWH,QAAAA,KAAK,EAAEI,MAAM,CAACJ;AAAzB,OAAP;;AACF,SAAKJ,OAAO,CAACE,KAAb;AACE,aAAO,EAAC,GAAGK,KAAJ;AAAWF,QAAAA,KAAK,EAAEG,MAAM,CAACH;AAAzB,OAAP;;AACF;AACE,aAAOE,KAAP;AANJ;AAQD,CATM;AAUP,OAAO,MAAMG,IAAI,GAAIC,KAAD,IAAW;AAC7B,SAAOC,QAAQ,IAAI;AACjBhB,IAAAA,GAAG,CAACiB,IAAJ,CAAS,OAAT,EAAkBF,KAAlB,EACCG,IADD,CACMC,QAAQ,IAAI;AAChBH,MAAAA,QAAQ,CAAC;AACLH,QAAAA,IAAI,EAAET,OAAO,CAACC,IADT;AAELG,QAAAA,KAAK,EAAEW,QAAQ,CAACC;AAFX,OAAD,EAINlB,oBAAoB,CAACiB,QAAQ,CAACC,IAAT,CAAcC,KAAf,EAAsBF,QAAQ,CAACC,IAAT,CAAcE,IAApC,CAJd,EAKNrB,OAAO,CAACsB,IAAR,CAAc,uBAAd,CALM,CAAR;AAOD,KATD,EAUCC,KAVD,CAUOC,KAAK,IAAI;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,KAZD;AAaD,GAdD;AAeD,CAhBM;AAiBP,OAAO,MAAMG,KAAK,GAAInB,KAAD,IAAW;AAC9B,SAAOO,QAAQ,IAAI;AACjBhB,IAAAA,GAAG,CAACiB,IAAJ,CAAS,aAAT,EAAwBR,KAAxB,EACCS,IADD,CACMC,QAAQ,IAAI;AAChBH,MAAAA,QAAQ,CAAC;AACLH,QAAAA,IAAI,EAAET,OAAO,CAACE,KADT;AAELG,QAAAA,KAAK,EAAEU,QAAQ,CAACC;AAFX,OAAD,EAINnB,OAAO,CAACsB,IAAR,CAAc,QAAd,CAJM,CAAR;AAMD,KARD,EASCC,KATD,CASOC,KAAK,IAAI;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,KAXD;AAYD,GAbD;AAcD,CAfM;AAgBP,OAAO,MAAMI,MAAM,GAAG,MAAK;AACzB1B,EAAAA,UAAU;AACVF,EAAAA,OAAO,CAACsB,IAAR,CAAc,QAAd;AACD,CAHM","sourcesContent":["import api from '../services/api';\r\nimport history from '../services/history';\r\nimport { setInfosLocalStorage, logoutUser } from '../services/auth';\r\n\r\nconst ACTIONS = {\r\n  AUTH: 'AUTH',\r\n  FOGOT: 'FOGOT'\r\n}\r\nconst INITIAL_STATE = {\r\n  infos:[],\r\n  email:[]\r\n}\r\nexport const authReducer = (state = INITIAL_STATE, action) => {\r\n  switch(action.type){\r\n    case ACTIONS.AUTH:\r\n      return {...state, infos: action.infos}\r\n    case ACTIONS.FOGOT:\r\n      return {...state, email: action.email}\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nexport const auth = (login) => {\r\n  return dispatch => {\r\n    api.post('/auth', login)\r\n    .then(Response => {\r\n      dispatch({\r\n          type: ACTIONS.AUTH,\r\n          infos: Response.data,\r\n        },\r\n        setInfosLocalStorage(Response.data.token, Response.data.user),\r\n        history.push(`/user?page=1&limit=25`)\r\n      );\r\n    })\r\n    .catch(error => {\r\n      console.log(error);\r\n    });\r\n  }\r\n}\r\nexport const fogot = (email) => {\r\n  return dispatch => {\r\n    api.post('/auth/fogot', email)\r\n    .then(Response => {\r\n      dispatch({\r\n          type: ACTIONS.FOGOT,\r\n          email: Response.data,\r\n        },\r\n        history.push(`/login`)\r\n      );\r\n    })\r\n    .catch(error => {\r\n      console.log(error);\r\n    });\r\n  }\r\n}\r\nexport const logout = () =>{\r\n  logoutUser();\r\n  history.push(`/login`);\r\n}"]},"metadata":{},"sourceType":"module"}